(()=>{"use strict";var e=(e,t)=>{var n=Math.round(e/t)*t;return Math.min(n,255)},t=e=>"#"+e.map((e=>{var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),n=(n,o)=>{for(var r=4*o.sample,c={},a=0;a<n.length;a+=r){var l=[e(n[a],o.group),e(n[a+1],o.group),e(n[a+2],o.group)].join();c[l]=c[l]?c[l]+1:1}return((e,n)=>{var o=e.map((e=>{var o=Array.isArray(e)?e:e.split(",").map(Number);return"hex"===n.format?t(o):o}));return 1===n.amount||1===o.length?o[0]:o})(Object.entries(c).sort((([e,t],[n,o])=>t>o?-1:1)).slice(0,o.amount).map((([e])=>e)),o)},o=(e,t)=>((e,t,n)=>new Promise(((o,r)=>{return(c=(e=>"string"==typeof e?e:e.src)(t),new Promise(((e,t)=>{var n=document.createElement("canvas"),o=n.getContext("2d"),r=new Image;r.onload=()=>{n.height=r.height,n.width=r.width,o.drawImage(r,0,0);var t=o.getImageData(0,0,r.width,r.height).data;e(t)},r.onerror=()=>t(Error("Image loading failed.")),r.crossOrigin="",r.src=c}))).then((t=>o(e(t,(({amount:e=3,format:t="array",group:n=20,sample:o=10}={})=>({amount:e,format:t,group:n,sample:o}))(n))))).catch((e=>r(e)));var c})))(n,e,t);const r=document.querySelector("#search-input"),c=document.querySelector(".search-color"),a=document.querySelector("#search-image"),l=document.querySelector("#palette-type"),s=document.querySelector("#type-text"),u=document.querySelector("#palette-count"),i=document.querySelector("#random-btn"),d=document.querySelector("#palette"),m=document.querySelector("#related"),h=document.querySelector("#image-colors"),p=document.querySelector(".image-colors-wrapper");let g="skyblue",f="monochromatic",v="6",y=[];function w(e,t){let n=v;const o=function(e){let t;if(b(e)){let n=document.createElement("div");n.style.color=e,document.body.appendChild(n);let o=window.getComputedStyle(n,null).getPropertyValue("color");document.body.removeChild(n),o=function(e){return e.replace("rgb(","").replace(")","").split(",")}(o),t=function(e){let t=e[0]/255,n=e[1]/255,o=e[2]/255,r=Math.min(t,n,o),c=Math.max(t,n,o),a=c-r,l=0,s=0,u=(r+c)/2;return 0===a?(l=0,s=0):l=c===t?(n-o)/a%6:c===n?(o-t)/a+2:(t-n)/a+4,l=Math.round(60*l),l<0&&(l+=360),0!==a&&(s=Math.round(a/(1-Math.abs(2*u-1))*100)),u=Math.round(100*u),[l,s,u]}(o)}return t}(g);if(!o)return;let r=[];t.innerHTML="",r="image-colors"===e?y:function(e,t,n){switch(t){case"analogous":return function(e,t){const n=[],[o,r,c]=e;for(let e=0;e<t;e++){let t=o+30*e;t>360&&(t-=360),n.push([t,r,c])}return n}(e,n);case"monochromatic":return function(e,t){const n=[];let[o,r,c]=e;for(let e=0;e<t;e++){let t=c=10*e;t>100&&(t-=100),n.push([o,r,t])}return n}(e,n);case"triadic":return function(e,t){const n=[];let[o,r,c]=e;for(let e=0;e<t;e++){let t=o+120*e;t>360&&(t-=360),n.push([t,r,c])}return n}(e,n);case"compound":return function(e,t){const n=[];let[o,r,c]=e;for(let e=0;e<t;e++){let t=o+150*e;t>360&&(t-=360),n.push([t,r,c])}return n}(e,n);case"shades":return function(e,t){const n=[];let[o,r,c]=e;for(let e=0;e<t;e++){let t=r+10*e;t>100&&(t-=100),n.push([o,t,c])}return n}(e,n);case"tetradic":return function(e,t){const n=[];let[o,r,c]=e;for(let e=0;e<t;e++){let t=o+90*e;t>360&&(t-=360),n.push([t,r,c])}return n}(e,n);case"square":return function(e,t){const n=[];let[o,r,c]=e;for(let e=0;e<t;e++){let t=o+60*e;t>360&&(t-=360),n.push([t,r,c])}return n}(e,n);case"related":return function(e,t){const n=[],[o,r,c]=e;n.push([o,(r+20)%100,c]),n.push([o,(r-20)%100,c]),n.push([o,r,(c+20)%100]),n.push([o,r,(c-20)%100]),n.push([(o+20)%360,r,c]),n.push([(o-20)%360,r,c]);for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n}(e)}}(o,e,n),r.forEach((n=>{"image-colors"!=e&&(n=function(e){let t=e[0],n=e[1],o=e[2];o/=100;const r=n*Math.min(o,1-o)/100,c=e=>{const n=(e+t/30)%12,c=o-r*Math.max(Math.min(n-3,9-n,1),-1);return Math.round(255*c).toString(16).padStart(2,"0")};return`#${c(0)}${c(8)}${c(4)}`}(n));const o=document.createElement("div");o.classList.add("color"),o.style.backgroundColor=n,o.innerHTML=`\n        <div class="overlay">\n          <div class="icons">\n            <div class="copy-color" title="Copy color code">\n                <i class="far fa-copy"></i>\n            </div>\n            <div class="generate-palette" tittle="Generate Palette">\n                <i class="fas fa-palette"></i>\n            </div>\n          </div>\n            <div class="code">${n}</div>\n        </div>\n    `,t.appendChild(o)}))}function b(e){return CSS.supports("color",e)}function E(e){const t=document.createElement("div");t.classList.add("toast"),t.textContent=e,document.body.appendChild(t),setTimeout((()=>{t.classList.add("show")}),10),setTimeout((()=>{t.classList.remove("show"),t.addEventListener("transitionend",(()=>{t.remove()}))}),2e3)}w(f,d),w("related",m),r.addEventListener("keyup",(e=>{const t=e.target.value;b(t)&&(c.style.backgroundColor=t,g=t,w(f,d),w("related",m))})),l.addEventListener("change",(e=>{const t=e.target.value;f=t,s.textContent=t+"Palette",w(f,d)})),u.addEventListener("change",(e=>{const t=e.target.value;v=t,w(f,d)})),i.addEventListener("click",(e=>{const t=function(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}();r.value=t,c.style.backgroundColor=t,g=t,w(f,d),w("related",m)})),a.addEventListener("change",(e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.readAsDataURL(t),e.onload=function(){const t=new Image;t.src=e.result,t.onload=function(){!function(e){o(e,{amount:6,format:"hex"}).then((e=>{y=[],y.push(...e),w("image-colors",h),p.classList.remove("hidden")}))}(t)}}}})),document.querySelectorAll(".palette").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target,n=e.target.parentElement.parentElement.children[1].textContent;t.classList.contains("copy-color")&&(function(e){const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(n),E(`Color ${n} copied to clipboard`)),t.classList.contains("generate-palette")&&(r.value=n,c.style.backgroundColor=n,g=n,w(f,d),w("related",m),E("Palette generated for"+n))}))}));const S=document.querySelector("#download-btn"),L=document.querySelector("#download-format"),C=document.querySelector("#download-name");S.addEventListener("click",(()=>{const e=L.value;let t=C.value;t=""==t?"palette":t,function(e,t){const n=document.querySelector("#palette").querySelectorAll(".color"),o=[];switch(n.forEach((e=>{o.push(e.style.backgroundColor)})),e){case"png":!function(e,t){const n=document.createElement("canvas");n.width=200*e.length,n.height=1e3;const o=n.getContext("2d");e.forEach(((e,t)=>{o.fillStyle=e,o.fillRect(200*t,0,200,1e3)}));const r=document.createElement("a");r.download=t+".png",r.href=n.toDataURL(),r.click()}(o,t);break;case"svg":!function(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("viewbox","0 0 100 100"),n.setAttribute("preserveAspectRatio","none"),e.forEach(((t,o)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","rect"),c=100/e.length;r.setAttribute("x",o*c),r.setAttribute("y",0),r.setAttribute("width",c),r.setAttribute("height",100),r.setAttribute("fill",t),n.appendChild(r)}));const o=(new XMLSerializer).serializeToString(n),r=new Blob([o],{type:"image/svg+xml;charset=utf=8"}),c=URL.createObjectURL(r),a=document.createElement("a");a.download=t+".svg",a.href=c,a.click()}(o,t);break;case"css":!function(e,t){const n=`:root{\n    ${e.map(((e,t)=>`--color-${t+1}: ${e};`)).join("\n")}\n  }`,o=new Blob([n],{type:"text/css"}),r=URL.createObjectURL(o),c=document.createElement("a");c.download=t+".css",c.href=r,c.click()}(o,t);break;case"json":!function(e,t){const n=JSON.stringify(e),o=new Blob([n],{type:"application/json"}),r=URL.createObjectURL(o),c=document.createElement("a");c.download=t+".json",c.href=r,c.click()}(o,t)}}(e,t)})),document.querySelector("#toggle").addEventListener("change",(e=>{e.target.checked?document.body.classList.add("dark"):document.body.classList.remove("dark")}))})();