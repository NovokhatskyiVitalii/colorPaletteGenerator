(()=>{"use strict";var e=(e,t)=>{var n=Math.round(e/t)*t;return Math.min(n,255)},t=e=>"#"+e.map((e=>{var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),n=(n,r)=>{for(var o=4*r.sample,a={},c=0;c<n.length;c+=o){var l=[e(n[c],r.group),e(n[c+1],r.group),e(n[c+2],r.group)].join();a[l]=a[l]?a[l]+1:1}return((e,n)=>{var r=e.map((e=>{var r=Array.isArray(e)?e:e.split(",").map(Number);return"hex"===n.format?t(r):r}));return 1===n.amount||1===r.length?r[0]:r})(Object.entries(a).sort((([e,t],[n,r])=>t>r?-1:1)).slice(0,r.amount).map((([e])=>e)),r)},r=(e,t)=>((e,t,n)=>new Promise(((r,o)=>{return(a=(e=>"string"==typeof e?e:e.src)(t),new Promise(((e,t)=>{var n=document.createElement("canvas"),r=n.getContext("2d"),o=new Image;o.onload=()=>{n.height=o.height,n.width=o.width,r.drawImage(o,0,0);var t=r.getImageData(0,0,o.width,o.height).data;e(t)},o.onerror=()=>t(Error("Image loading failed.")),o.crossOrigin="",o.src=a}))).then((t=>r(e(t,(({amount:e=3,format:t="array",group:n=20,sample:r=10}={})=>({amount:e,format:t,group:n,sample:r}))(n))))).catch((e=>o(e)));var a})))(n,e,t);const o=document.querySelector("#search-input"),a=document.querySelector(".search-color"),c=document.querySelector("#search-image"),l=document.querySelector("#palette-type"),s=document.querySelector("#type-text"),u=document.querySelector("#palette-count"),i=document.querySelector("#random-btn"),d=document.querySelector("#palette"),m=document.querySelector("#related"),h=document.querySelector("#image-colors"),p=document.querySelector(".image-colors-wrapper");let f="skyblue",g="monochromatic",v="6",y=[];function C(e,t){let n=v;const r=function(e){let t;if(E(e)){let n=document.createElement("div");n.style.color=e,document.body.appendChild(n);let r=window.getComputedStyle(n,null).getPropertyValue("color");document.body.removeChild(n),r=function(e){return e.replace("rgb(","").replace(")","").split(",")}(r),t=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.min(t,n,r),a=Math.max(t,n,r),c=a-o,l=0,s=0,u=(o+a)/2;return 0===c?(l=0,s=0):l=a===t?(n-r)/c%6:a===n?(r-t)/c+2:(t-n)/c+4,l=Math.round(60*l),l<0&&(l+=360),0!==c&&(s=Math.round(c/(1-Math.abs(2*u-1))*100)),u=Math.round(100*u),[l,s,u]}(r)}return t}(f);if(!r)return;let o=[];t.innerHTML="",o="image-colors"===e?y:function(e,t,n){switch(t){case"analogous":return function(e,t){const n=[],[r,o,a]=e;for(let e=0;e<t;e++){let t=r+30*e;t>360&&(t-=360),n.push([t,o,a])}return n}(e,n);case"monochromatic":return function(e,t){const n=[];let[r,o,a]=e;for(let e=0;e<t;e++){let t=a=10*e;t>100&&(t-=100),n.push([r,o,t])}return n}(e,n);case"triadic":return function(e,t){const n=[];let[r,o,a]=e;for(let e=0;e<t;e++){let t=r+120*e;t>360&&(t-=360),n.push([t,o,a])}return n}(e,n);case"compound":return function(e,t){const n=[];let[r,o,a]=e;for(let e=0;e<t;e++){let t=r+150*e;t>360&&(t-=360),n.push([t,o,a])}return n}(e,n);case"shades":return function(e,t){const n=[];let[r,o,a]=e;for(let e=0;e<t;e++){let t=o+10*e;t>100&&(t-=100),n.push([r,t,a])}return n}(e,n);case"tetradic":return function(e,t){const n=[];let[r,o,a]=e;for(let e=0;e<t;e++){let t=r+90*e;t>360&&(t-=360),n.push([t,o,a])}return n}(e,n);case"square":return function(e,t){const n=[];let[r,o,a]=e;for(let e=0;e<t;e++){let t=r+60*e;t>360&&(t-=360),n.push([t,o,a])}return n}(e,n);case"related":return function(e,t){const n=[],[r,o,a]=e;n.push([r,(o+20)%100,a]),n.push([r,(o-20)%100,a]),n.push([r,o,(a+20)%100]),n.push([r,o,(a-20)%100]),n.push([(r+20)%360,o,a]),n.push([(r-20)%360,o,a]);for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n}(e)}}(r,e,n),o.forEach((n=>{"image-colors"!=e&&(n=function(e){let t=e[0],n=e[1],r=e[2];r/=100;const o=n*Math.min(r,1-r)/100,a=e=>{const n=(e+t/30)%12,a=r-o*Math.max(Math.min(n-3,9-n,1),-1);return Math.round(255*a).toString(16).padStart(2,"0")};return`#${a(0)}${a(8)}${a(4)}`}(n));const r=document.createElement("div");r.classList.add("color"),r.style.backgroundColor=n,r.innerHTML=`\n        <div class="overlay">\n          <div class="icons">\n            <div class="copy-color" title="Copy color code">\n                <i class="far fa-copy"></i>\n            </div>\n            <div class="generate-palette" tittle="Generate Palette">\n                <i class="fas fa-palette"></i>\n            </div>\n          </div>\n            <div class="code">${n}</div>\n        </div>\n    `,t.appendChild(r)}))}function E(e){return CSS.supports("color",e)}function M(e){const t=document.createElement("div");t.classList.add("toast"),t.textContent=e,document.body.appendChild(t),setTimeout((()=>{t.classList.add("show")}),10),setTimeout((()=>{t.classList.remove("show"),t.addEventListener("transitionend",(()=>{t.remove()}))}),2e3)}C(g,d),C("related",m),o.addEventListener("keyup",(e=>{const t=e.target.value;E(t)&&(a.style.backgroundColor=t,f=t,C(g,d),C("related",m))})),l.addEventListener("change",(e=>{const t=e.target.value;g=t,s.textContent=t+"Palette",C(g,d)})),u.addEventListener("change",(e=>{const t=e.target.value;v=t,C(g,d)})),i.addEventListener("click",(e=>{const t=function(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}();o.value=t,a.style.backgroundColor=t,f=t,C(g,d),C("related",m)})),c.addEventListener("change",(e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.readAsDataURL(t),e.onload=function(){const t=new Image;t.src=e.result,t.onload=function(){!function(e){r(e,{amount:6,format:"hex"}).then((e=>{y=[],y.push(...e),C("image-colors",h),p.classList.remove("hidden")}))}(t)}}}})),document.querySelectorAll(".palette").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target,n=e.target.parentElement.parentElement.children[1].textContent;t.classList.contains("copy-color")&&(function(e){const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(n),M(`Color ${n} copied to clipboard`)),t.classList.contains("generate-palette")&&(o.value=n,a.style.backgroundColor=n,f=n,C(g,d),C("related",m),M("Palette generated for"+n))}))}))})();